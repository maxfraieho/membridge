---
tags:
  - domain:frontend
  - status:canonical
  - format:prompt
  - feature:execution
created: 2026-02-25
updated: 2026-02-26
tier: 1
title: "Lovable Initial Instruction ‚Äî BLOOM Agents & LLM Resources"
---

# Lovable Initial Instruction ‚Äî BLOOM Agents & LLM Resources

> –ê–≤—Ç–æ—Ä: –ê—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä —Å–∏—Å—Ç–µ–º–∏
> –°—Ç–∞—Ç—É—Å: Canonical
> –ú–æ–≤–∞: –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ (–∫–∞–Ω–æ–Ω—ñ—á–Ω–∞)
> –ö–æ–Ω—Ç–µ–∫—Å—Ç: –ü–æ—á–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è Lovable ‚Äî –∞–≥–µ–Ω—Ç–∏ —Ç–∞ –¥–æ—Å—Ç—É–ø –¥–æ LLM-—Ä–µ—Å—É—Ä—Å—ñ–≤

---

## 0. –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–∏—Å—Ç–µ–º–∏

**Garden Bloom** ‚Äî execution platform –¥–ª—è AI-–∞–≥–µ–Ω—Ç—ñ–≤, –¥–µ –ª—é–¥–∏–Ω–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª—ñ. –ê–≥–µ–Ω—Ç–∏ –ø—Ä–æ–ø–æ–Ω—É—é—Ç—å –∑–º—ñ–Ω–∏ —á–µ—Ä–µ–∑ Proposal system, –≤–ª–∞—Å–Ω–∏–∫ –≤–∏—Ä—ñ—à—É—î —â–æ –ø—Ä–∏–π–Ω—è—Ç–∏.

**BLOOM** (Behavioral Logic Orchestration for Order-Made Systems) ‚Äî runtime-—è–¥—Ä–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏. –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—é –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∞–≥–µ–Ω—Ç—ñ–≤, —ñ–∑–æ–ª—è—Ü—ñ—é –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ–≤, –¥–µ–ª–µ–≥—É–≤–∞–Ω–Ω—è behavioral logic.

**–ö–ª—é—á–æ–≤–∏–π –ø—Ä–∏–Ω—Ü–∏–ø:** AI –ø—Ä–æ–ø–æ–Ω—É—î ‚Äî –ª—é–¥–∏–Ω–∞ –≤–∏—Ä—ñ—à—É—î. –ö–æ–∂–Ω–∞ –º—É—Ç–∞—Ü—ñ—è ‚Äî —á–µ—Ä–µ–∑ —è–≤–Ω—É –∑–≥–æ–¥—É.

---

## 1. –î–≤–∞ –∫–∞–Ω–∞–ª–∏ LLM-—Ä–µ—Å—É—Ä—Å—ñ–≤

–ê–≥–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏ –º–∞—é—Ç—å –¥–≤–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö —à–ª—è—Ö–∏ –¥–æ—Å—Ç—É–ø—É –¥–æ LLM:

### 1.1 NotebookLM (—á–µ—Ä–µ–∑ NotebookLM.py / FastAPI)

**–†–æ–ª—å:** –ö–æ–≥–Ω—ñ—Ç–∏–≤–Ω–µ —è–¥—Ä–æ –¥–ª—è —Ä–æ–±–æ—Ç–∏ —Å—Ç—Ä–æ–≥–æ –ø–æ –¥–∂–µ—Ä–µ–ª–∞—Ö.

```
Agent ‚Üí Mastra Tool ‚Üí FastAPI (NotebookLM.py) ‚Üí NotebookLM API
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ü—Ä–∞—Ü—é—î **—Å—Ç—Ä–æ–≥–æ –ø–æ –Ω–∞–¥–∞–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª–∞—Ö** ‚Äî –±–µ–∑ –≥–∞–ª—é—Ü–∏–Ω–∞—Ü—ñ–π
- –ü–æ—è—Å–Ω—é—î, —É–∑–∞–≥–∞–ª—å–Ω—é—î, —Å—Ç—Ä—É–∫—Ç—É—Ä—É—î –∑–Ω–∞–Ω–Ω—è
- –ü–æ–≤–µ—Ä—Ç–∞—î —Ü–∏—Ç–∞—Ç–∏ —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
- –ù–µ –ø—Ä–∏–π–º–∞—î –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∏—Ö —Ä—ñ—à–µ–Ω—å, –Ω–µ –∫–µ—Ä—É—î –ø—Ä–æ—Ü–µ—Å–∞–º–∏

**–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:**
- –ê–Ω–∞–ª—ñ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó —Ç–∞ –∑–Ω–∞–Ω—å
- –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ summaries –∑ –¥–∂–µ—Ä–µ–ª
- –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è –≤ –º–µ–∂–∞—Ö knowledge base
- –ö–æ–≥–Ω—ñ—Ç–∏–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –∑–æ–Ω –∑–Ω–∞–Ω—å

**–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —É frontend:**
- –ê–≥–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è ‚Üí –∫—Ä–æ–∫ `query NLM` ‚Üí FastAPI ‚Üí NotebookLM
- UI –ø–æ–∫–∞–∑—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç —è–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –∞–±–æ proposal
- Frontend **–Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è** –¥–æ FastAPI/NotebookLM –Ω–∞–ø—Ä—è–º—É

### 1.2 Membridge (Claude –∑ —Ä—ñ–∑–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤)

**–†–æ–ª—å:** –†–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∏–π execution fabric –¥–ª—è –¥–µ–ª–µ–≥—É–≤–∞–Ω–Ω—è LLM-–∑–∞–¥–∞—á –º—ñ–∂ –∫—ñ–ª—å–∫–æ–º–∞ Claude-–∞–∫–∞—É–Ω—Ç–∞–º–∏.

```
BLOOM Runtime API ‚Üí Membridge Control Plane ‚Üí Agent Daemons ‚Üí Claude CLI (—Ä—ñ–∑–Ω—ñ –∞–∫–∞—É–Ω—Ç–∏)
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ö—ñ–ª—å–∫–∞ –º–∞—à–∏–Ω –∑ –æ–∫—Ä–µ–º–∏–º–∏ Claude-–∞–∫–∞—É–Ω—Ç–∞–º–∏ (—Ä—ñ–∑–Ω—ñ API keys / –ø—ñ–¥–ø–∏—Å–∫–∏)
- –ö–æ–∂–Ω–∞ –º–∞—à–∏–Ω–∞ = Worker –∑ Agent Daemon
- –ó–∞–¥–∞—á—ñ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—é—Ç—å—Å—è –º—ñ–∂ workers —á–µ—Ä–µ–∑ lease-—Å–∏—Å—Ç–µ–º—É
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è —è–∫ Artifacts ‚Äî workers **–Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–∏—à—É—Ç—å** —É canonical storage –Ω–∞–ø—Ä—è–º—É
- –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø–∞–º'—è—Ç—ñ (claude-mem.db) —á–µ—Ä–µ–∑ MinIO

**Execution Pipeline:**
1. `POST /api/runtime/llm-tasks` ‚Äî —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–¥–∞—á—É
2. `POST /api/runtime/llm-tasks/:id/lease` ‚Äî –ø—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ worker (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π routing)
3. Worker –≤–∏–∫–æ–Ω—É—î –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ —Å–≤—ñ–π Claude CLI
4. `POST /api/runtime/llm-tasks/:id/complete` ‚Äî worker –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç
5. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ MinIO (–∞–±–æ PostgreSQL —è–∫ fallback)

**API –¥–ª—è frontend (–ø—Ä–æ–∫—Å—ñ —á–µ—Ä–µ–∑ backend):**

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å |
|----------|-------|------|
| `/api/runtime/workers` | GET | –°–ø–∏—Å–æ–∫ workers –∑ —Å—Ç–∞—Ç—É—Å–∞–º–∏ |
| `/api/runtime/workers` | POST | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ worker |
| `/api/runtime/workers/:id` | GET | –î–µ—Ç–∞–ª—ñ worker + –∞–∫—Ç–∏–≤–Ω—ñ leases |
| `/api/runtime/workers/:id` | DELETE | –í–∏–¥–∞–ª–µ–Ω–Ω—è worker |
| `/api/runtime/llm-tasks` | GET | –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á (—Ñ—ñ–ª—å—Ç—Ä `?status=`) |
| `/api/runtime/llm-tasks` | POST | –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–¥–∞—á—É |
| `/api/runtime/llm-tasks/:id` | GET | –î–µ—Ç–∞–ª—ñ –∑–∞–¥–∞—á—ñ |
| `/api/runtime/llm-tasks/:id/lease` | POST | –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ worker |
| `/api/runtime/llm-tasks/:id/heartbeat` | POST | –û–Ω–æ–≤–∏—Ç–∏ heartbeat |
| `/api/runtime/llm-tasks/:id/complete` | POST | –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º |
| `/api/runtime/llm-tasks/:id/requeue` | POST | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ failed/dead |
| `/api/runtime/leases` | GET | –°–ø–∏—Å–æ–∫ leases |
| `/api/runtime/artifacts` | GET | –ê—Ä—Ç–µ—Ñ–∞–∫—Ç–∏ (—Ñ—ñ–ª—å—Ç—Ä `?task_id=`) |
| `/api/runtime/stats` | GET | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (tasks/leases/workers) |
| `/api/runtime/audit` | GET | Audit log |
| `/api/runtime/health` | GET | –ó–¥–æ—Ä–æ–≤'—è —Å–µ—Ä–≤—ñ—Å—É |
| `/api/runtime/workers/:id/agent-health` | GET | Health check –∞–≥–µ–Ω—Ç–∞ –Ω–∞ –Ω–æ–¥—ñ |
| `/api/runtime/workers/:id/agent-update` | POST | –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∞–≥–µ–Ω—Ç–∞ (git pull + restart) |
| `/api/runtime/workers/:id/agent-restart` | POST | –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ systemd-—Å–µ—Ä–≤—ñ—Å—É –∞–≥–µ–Ω—Ç–∞ |
| `/api/runtime/workers/:id/agent-uninstall` | POST | –í–∏–¥–∞–ª–µ–Ω–Ω—è –∞–≥–µ–Ω—Ç–∞ –∑ –Ω–æ–¥–∏ |
| `/api/runtime/agent-install-script` | GET | –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è bash-—Å–∫—Ä–∏–ø—Ç–∞ —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó (?node_id=, ?server_url=) |

**Multi-Project Git Management:**

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å |
|----------|-------|------|
| `/api/runtime/projects` | GET | –°–ø–∏—Å–æ–∫ managed git-–ø—Ä–æ—î–∫—Ç—ñ–≤ |
| `/api/runtime/projects` | POST | –°—Ç–≤–æ—Ä–∏—Ç–∏ managed –ø—Ä–æ—î–∫—Ç (name, repo_url, target_path) |
| `/api/runtime/projects/:id` | GET | –î–µ—Ç–∞–ª—ñ –ø—Ä–æ—î–∫—Ç—É + —Å—Ç–∞—Ç—É—Å –Ω–æ–¥ |
| `/api/runtime/projects/:id` | DELETE | –í–∏–¥–∞–ª–∏—Ç–∏ managed –ø—Ä–æ—î–∫—Ç |
| `/api/runtime/projects/:id/clone` | POST | –ö–ª–æ–Ω—É–≤–∞—Ç–∏ –ø—Ä–æ—î–∫—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É –Ω–æ–¥—É |
| `/api/runtime/projects/:id/propagate` | POST | –ü–æ—à–∏—Ä–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç –Ω–∞ –≤—Å—ñ –Ω–æ–¥–∏ |
| `/api/runtime/projects/:id/sync-memory` | POST | Push/pull claude-mem.db –¥–ª—è –ø—Ä–æ—î–∫—Ç—É |
| `/api/runtime/projects/:id/node-status` | GET | –°—Ç–∞—Ç—É—Å –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è –ø–æ –Ω–æ–¥–∞—Ö |

**Membridge Control Plane (–ø—Ä–æ–∫—Å—ñ):**

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å |
|----------|-------|------|
| `/api/membridge/health` | GET | –ó–¥–æ—Ä–æ–≤'—è Membridge |
| `/api/membridge/projects` | GET | –°–ø–∏—Å–æ–∫ –ø—Ä–æ—î–∫—Ç—ñ–≤ sync |
| `/api/membridge/projects/:cid/leadership` | GET | Leadership lease –ø—Ä–æ—î–∫—Ç—É |
| `/api/membridge/projects/:cid/nodes` | GET | –ù–æ–¥–∏ –ø—Ä–æ—î–∫—Ç—É |
| `/api/membridge/projects/:cid/leadership/select` | POST | –ü—Ä–æ–º–æ—Ç—É–≤–∞—Ç–∏ primary |

---

## 2. –î–≤–∞ —à–∞—Ä–∏ –ø–∞–º'—è—Ç—ñ (–ö–†–ò–¢–ò–ß–ù–ò–ô –Ü–ù–í–ê–†–Ü–ê–ù–¢)

**–¶–ï –ù–ê–ô–í–ê–ñ–õ–ò–í–Ü–®–ï –û–ë–ú–ï–ñ–ï–ù–ù–Ø.** –î–≤–∞ —à–∞—Ä–∏ –ø–∞–º'—è—Ç—ñ –ù–Ü–ö–û–õ–ò –Ω–µ –∑–º—ñ—à—É—é—Ç—å—Å—è:

### –®–∞—Ä A: claude-mem.db (Membridge ‚Üí MinIO)
- **–©–æ:** SQLite –±–∞–∑–∏ –ø–∞–º'—è—Ç—ñ Claude —Å–µ—Å—ñ–π
- **–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è:** Membridge sync —á–µ—Ä–µ–∑ MinIO (push/pull)
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** Session-level, –ø—Ä–∏–≤'—è–∑–∞–Ω–∞ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ Claude CLI
- **Frontend:** –ù–ï –ø–æ–∫–∞–∑—É—î –≤–º—ñ—Å—Ç –±–∞–∑–∏ –Ω–∞–ø—Ä—è–º—É; –ø–æ–∫–∞–∑—É—î sync-—Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ Membridge UI

### –®–∞—Ä B: DiffMem / git (Agent Reasoning)
- **–©–æ:** Git-based memory –¥–ª—è –∞–≥–µ–Ω—Ç–Ω–æ–≥–æ –º—ñ—Ä–∫—É–≤–∞–Ω–Ω—è
- **–§–æ—Ä–º–∞—Ç:** Markdown entities —É git-—Ä–µ–ø–æ (entities/people/, entities/projects/, etc.)
- **–û–ø–µ—Ä–∞—Ü—ñ—ó:** –¢—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ Proposal ‚Üí Apply cycle
- **Frontend:** MemoryPanel.tsx (search, context, add memory)
- **Workers:** –ü–æ–≤–µ—Ä—Ç–∞—é—Ç—å results/proposals ‚Äî –ù–Ü–ö–û–õ–ò –Ω–µ –ø–∏—à—É—Ç—å canonical storage

**UI –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω:**
- –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ claude-mem.db –ø–æ—Ä—è–¥ –∑ DiffMem entities —è–∫ –æ–¥–Ω—É –∫–æ–ª–µ–∫—Ü—ñ—é
- –î–æ–∑–≤–æ–ª—è—Ç–∏ workers –ø–∏—Å–∞—Ç–∏ –Ω–∞–ø—Ä—è–º—É –≤ knowledge base
- –û–±—Ö–æ–¥–∏—Ç–∏ Proposal lifecycle –¥–ª—è –±—É–¥—å-—è–∫–∏—Ö –º—É—Ç–∞—Ü—ñ–π

---

## 3. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É Frontend

### 3.1 Frontend = –ø—Ä–æ—î–∫—Ü—ñ—è —Å—Ç–∞–Ω—É

Frontend **–≤—ñ–¥–æ–±—Ä–∞–∂–∞—î** –¥–∞–Ω—ñ, –∞ –Ω–µ —î —ó—Ö –¥–∂–µ—Ä–µ–ª–æ–º.

| –ê—Å–ø–µ–∫—Ç | Frontend —Ä–æ–±–∏—Ç—å | Frontend –ù–ï —Ä–æ–±–∏—Ç—å |
|--------|----------------|-------------------|
| Workers | –ü–æ–∫–∞–∑—É—î —Å–ø–∏—Å–æ–∫, —Å—Ç–∞—Ç—É—Å–∏, leases | –ù–µ –∫–µ—Ä—É—î workers –Ω–∞–ø—Ä—è–º—É |
| Tasks | –ü–æ–∫–∞–∑—É—î queue, —Å—Ç–≤–æ—Ä—é—î tasks —á–µ—Ä–µ–∑ API | –ù–µ –≤–∏–∫–æ–Ω—É—î tasks |
| Artifacts | –í—ñ–¥–æ–±—Ä–∞–∂–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ | –ù–µ –º–æ–¥–∏—Ñ—ñ–∫—É—î artifacts |
| Proposals | –ü–æ–∫–∞–∑—É—î, –¥–æ–∑–≤–æ–ª—è—î approve/reject | –ù–µ bypass-–∏—Ç—å approval |
| NotebookLM | –ü–æ–∫–∞–∑—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ query | –ù–µ –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ NLM –Ω–∞–ø—Ä—è–º—É |
| Membridge | –ü–æ–∫–∞–∑—É—î –ø—Ä–æ—î–∫—Ç–∏, leadership, –Ω–æ–¥–∏ | –ù–µ —Ç—Ä–∏–º–∞—î admin key |

### 3.2 –®–ª—è—Ö –¥–∞–Ω–∏—Ö

```
Frontend ‚Üí API (Express backend, –ø–æ—Ä—Ç 5000) ‚Üí {PostgreSQL, Membridge, MinIO}
```

Frontend –ù–Ü–ö–û–õ–ò –Ω–µ –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ:
- Membridge Control Plane –Ω–∞–ø—Ä—è–º—É (—Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ `/api/membridge/*` –ø—Ä–æ–∫—Å—ñ)
- FastAPI / NotebookLM.py –Ω–∞–ø—Ä—è–º—É
- MinIO –Ω–∞–ø—Ä—è–º—É
- Claude CLI / API –Ω–∞–ø—Ä—è–º—É

### 3.3 –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

| –ö–æ–Ω—Ç–µ–∫—Å—Ç | –ú–µ—Ö–∞–Ω—ñ–∑–º |
|----------|----------|
| Frontend ‚Üí Backend API | `X-Runtime-API-Key` header (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, —è–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ) |
| Backend ‚Üí Membridge | `X-MEMBRIDGE-ADMIN` (—ñ–Ω–∂–µ–∫—Ç—É—î—Ç—å—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º, frontend –Ω–µ –±–∞—á–∏—Ç—å) |
| NotebookLM | `Bearer NOTEBOOKLM_SERVICE_TOKEN` (—á–µ—Ä–µ–∑ CF Worker, frontend –Ω–µ –±–∞—á–∏—Ç—å) |
| Owner –¥–æ—Å—Ç—É–ø | JWT —á–µ—Ä–µ–∑ Access Gate (master-key) |

---

## 4. UI –º–æ–¥—É–ª—ñ –¥–ª—è LLM-—Ä–µ—Å—É—Ä—Å—ñ–≤

### 4.1 Runtime Dashboard (—ñ—Å–Ω—É—î: RuntimeSettings.tsx)

–¢—Ä–∏ –≤–∫–ª–∞–¥–∫–∏:
- **Overview** ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ tasks/workers/leases, –≥—Ä–∞—Ñ—ñ–∫–∏
- **Task Queue** ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö, requeue
- **Membridge Proxy** ‚Äî –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è URL + admin key, test connection

**–©–æ –¥–æ–¥–∞—Ç–∏/–ø–æ–∫—Ä–∞—â–∏—Ç–∏:**
- Task detail view –∑ lease info —Ç–∞ artifact
- Lease timeline visualization

### 4.2 Membridge Control Plane (—ñ—Å–Ω—É—î: MembridgePage.tsx)

- –°–ø–∏—Å–æ–∫ –ø—Ä–æ—î–∫—Ç—ñ–≤ sync (leadership card, nodes table, promote primary)
- Multi-project git management:
  - **Add Project** —Ñ–æ—Ä–º–∞ (name, repo_url, target_path)
  - **Managed Project Cards** –∑ clone/propagate/sync-memory –∫–Ω–æ–ø–∫–∞–º–∏
  - **Per-node clone status** —Ç–∞–±–ª–∏—Ü—è
  - **Memory push/pull** –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É

**–©–æ –¥–æ–¥–∞—Ç–∏/–ø–æ–∫—Ä–∞—â–∏—Ç–∏:**
- Sync history / job log
- Visual leadership timeline

### 4.3 Node & Agent Management (—ñ—Å–Ω—É—î: NodeManagement.tsx)

–ú–∞—Ä—à—Ä—É—Ç: `/nodes`

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:
- **Stat Cards** ‚Äî Total Nodes / Online / Offline+Unknown (–∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è 15—Å)
- **Fleet Overview** ‚Äî —Ç–∞–±–ª–∏—Ü—è –∑ agent_version, status, URL, IPs, last heartbeat
- **Node Actions** ‚Äî 5 –∫–Ω–æ–ø–æ–∫ –Ω–∞ –∫–æ–∂–Ω—É –Ω–æ–¥—É:
  - ‚ô• Health Check ‚Üí `GET /api/runtime/workers/:id/agent-health`
  - ‚Üë Update ‚Üí `POST /api/runtime/workers/:id/agent-update`
  - ‚Üª Restart ‚Üí `POST /api/runtime/workers/:id/agent-restart`
  - ‚úï Uninstall ‚Üí `POST /api/runtime/workers/:id/agent-uninstall`
  - üóë Remove ‚Üí `DELETE /api/runtime/workers/:id`
- **Install Script Card** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è curl one-liner (–∑ –ø–æ–ª—è–º–∏ Control Plane URL —Ç–∞ Node ID)
- **Register Node Form** ‚Äî —Ä—É—á–Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (Node ID + Agent URL)

**–î–∞–Ω—ñ worker-–Ω–æ–¥–∏ (—Ä–æ–∑—à–∏—Ä–µ–Ω—ñ):**

```typescript
interface WorkerNode {
  id: string;
  node_id: string;
  url: string;
  status: "online" | "offline" | "syncing" | "error" | "unknown";
  capabilities: { claude_cli: boolean; max_concurrency: number; labels: string[] };
  last_heartbeat: number | null;
  ip_addrs: string[];
  active_leases: number;
  agent_version: string;   // –≤–µ—Ä—Å—ñ—è –∞–≥–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ "0.3.1")
  os_info: string;         // hostname –∞–±–æ OS info
  install_method: string;  // "script" | "manual" | "unknown"
}
```

### 4.4 Agent Memory Panel (—ñ—Å–Ω—É—î: MemoryPanel.tsx)

- Search (BM25 + LLM orchestrated)
- Context assembly (4 depths: basic/wide/deep/temporal)
- Add Memory (process transcript ‚Üí entities)

**–ù–µ —á—ñ–ø–∞—Ç–∏:** –¶–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∂–µ –ø—Ä–∞—Ü—é—î. –ó–º—ñ–Ω–∏ —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ –æ–∫—Ä–µ–º–∏–π prompt.

### 4.5 Agent Catalog (–ø–ª–∞–Ω—É—î—Ç—å—Å—è: AgentsPage.tsx)

- Agent cards –∑ name, zone, status badge, order
- Reorder (drag or ‚Üë‚Üì)
- Agent form (name, zone, behavior pseudocode, triggers)
- Agent detail panel

---

## 5. Data Types (TypeScript)

### 5.1 –í–∂–µ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ —É shared/schema.ts

```typescript
interface WorkerNode {
  id: string;
  node_id: string;
  url: string;
  status: "online" | "offline" | "syncing" | "error" | "unknown";
  capabilities: { claude_cli: boolean; max_concurrency: number; labels: string[] };
  last_heartbeat: number | null;
  ip_addrs: string[];
  active_leases: number;
}

interface LLMTask {
  id: string;
  context_id: string;
  agent_slug: string;
  prompt: string;
  status: "queued" | "leased" | "running" | "completed" | "failed" | "dead";
  created_at: number;
  updated_at: number;
  lease_id: string | null;
  worker_id: string | null;
  attempts: number;
  max_attempts: number;
}

interface Lease {
  id: string;
  task_id: string;
  worker_id: string;
  started_at: number;
  expires_at: number;
  status: "active" | "expired" | "released" | "failed";
  last_heartbeat: number;
}

interface RuntimeArtifact {
  id: string;
  task_id: string;
  type: string;
  url: string | null;      // minio:// URL —è–∫—â–æ –≤ MinIO, null —è–∫—â–æ –≤ PostgreSQL
  content: string | null;  // –≤–º—ñ—Å—Ç —è–∫—â–æ –≤ PostgreSQL, null —è–∫—â–æ –≤ MinIO
  tags: string[];
}

interface AuditLogEntry {
  id: string;
  timestamp: number;
  action: string;
  entity_type: string;
  entity_id: string;
  actor: string;
  detail: string;
}
```

### 5.2 –î–ª—è Multi-Project Git Management (–≤–∏–∑–Ω–∞—á–µ–Ω—ñ —É shared/schema.ts)

```typescript
interface ManagedProject {
  id: string;
  name: string;           // regex: ^[a-zA-Z0-9_-]+$
  repo_url: string;       // git URL
  target_path: string;    // —à–ª—è—Ö –Ω–∞ –Ω–æ–¥—ñ (–±–µ–∑ "..")
  status: "active" | "archived";
  created_at: number;
  primary_node_id: string | null;
}

interface ProjectNodeCloneStatus {
  id: string;
  project_id: string;
  node_id: string;
  status: "pending" | "cloning" | "cloned" | "failed" | "synced";
  last_clone_at: number | null;
  error: string | null;
}
```

### 5.3 –î–ª—è Agent Registry (–Ω–æ–≤—ñ)

```typescript
type AgentStatus = 'active' | 'inactive' | 'draft';

interface AgentDefinition {
  id: string;             // kebab-case
  name: string;
  zone: string;           // folder path, e.g. "exodus.pp.ua/architecture"
  order: number;          // execution sequence
  status: AgentStatus;
  behavior: string;       // pseudocode markdown
  description?: string;
  triggers?: string[];
  created: string;        // ISO date
  updated: string;
}
```

---

## 6. –ü–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö: Agent Execution –∑ –¥–≤–æ–º–∞ LLM-—Ä–µ—Å—É—Ä—Å–∞–º–∏

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ     Owner (UI)      ‚îÇ
                    ‚îÇ  –ó–∞–ø—É—Å–∫–∞—î –∞–≥–µ–Ω—Ç–∞    ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  Orchestration      ‚îÇ
                    ‚îÇ  (BLOOM Runtime)    ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚ñº                               ‚ñº
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  –®–ª—è—Ö A: NLM       ‚îÇ         ‚îÇ  –®–ª—è—Ö B: Membridge ‚îÇ
   ‚îÇ                    ‚îÇ         ‚îÇ                    ‚îÇ
   ‚îÇ  Agent Tool:       ‚îÇ         ‚îÇ  LLM Task:         ‚îÇ
   ‚îÇ  notebooklm-query  ‚îÇ         ‚îÇ  POST /llm-tasks   ‚îÇ
   ‚îÇ       ‚îÇ            ‚îÇ         ‚îÇ       ‚îÇ            ‚îÇ
   ‚îÇ       ‚ñº            ‚îÇ         ‚îÇ       ‚ñº            ‚îÇ
   ‚îÇ  FastAPI           ‚îÇ         ‚îÇ  Worker Selection  ‚îÇ
   ‚îÇ  (NotebookLM.py)   ‚îÇ         ‚îÇ  (Lease routing)   ‚îÇ
   ‚îÇ       ‚îÇ            ‚îÇ         ‚îÇ       ‚îÇ            ‚îÇ
   ‚îÇ       ‚ñº            ‚îÇ         ‚îÇ       ‚ñº            ‚îÇ
   ‚îÇ  NotebookLM API    ‚îÇ         ‚îÇ  Claude CLI        ‚îÇ
   ‚îÇ  (Google)          ‚îÇ         ‚îÇ  (–∞–∫–∞—É–Ω—Ç worker-–∞) ‚îÇ
   ‚îÇ       ‚îÇ            ‚îÇ         ‚îÇ       ‚îÇ            ‚îÇ
   ‚îÇ       ‚ñº            ‚îÇ         ‚îÇ       ‚ñº            ‚îÇ
   ‚îÇ  –í—ñ–¥–ø–æ–≤—ñ–¥—å –∑       ‚îÇ         ‚îÇ  –†–µ–∑—É–ª—å—Ç–∞—Ç         ‚îÇ
   ‚îÇ  —Ü–∏—Ç–∞—Ç–∞–º–∏          ‚îÇ         ‚îÇ  (text/json)       ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ                              ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ  Proposal / Artifact‚îÇ
                 ‚îÇ  ‚Üí MinIO storage    ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ  Owner Review (UI)  ‚îÇ
                 ‚îÇ  Approve / Reject   ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 7. Rate Limiting

API –º–∞—î rate limiting:

| –ì—Ä—É–ø–∞ | –õ—ñ–º—ñ—Ç | Endpoints |
|-------|-------|-----------|
| General | 100 req/—Ö–≤ | `/api/runtime/*`, `/api/membridge/*` |
| Strict | 20 req/—Ö–≤ | `POST /api/runtime/test-connection` |

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ `RateLimit-*` –∑–∞–≥–æ–ª–æ–≤–∫–∏ —É –≤—ñ–¥–ø–æ–≤—ñ–¥—è—Ö. –ü—Ä–∏ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—ñ ‚Äî HTTP 429.

---

## 8. –û–±–º–µ–∂–µ–Ω–Ω—è –¥–ª—è Lovable

### –ó–ê–ë–û–†–û–ù–ï–ù–û:
1. –ó–≤–µ—Ä—Ç–∞—Ç–∏—Å—è –¥–æ Membridge/FastAPI/MinIO/Claude –Ω–∞–ø—Ä—è–º—É –∑ frontend
2. –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ admin key, API keys, tokens —É frontend –∫–æ–¥—ñ
3. –ó–º—ñ—à—É–≤–∞—Ç–∏ claude-mem.db —Ç–∞ DiffMem –¥–∞–Ω—ñ –≤ –æ–¥–Ω–æ–º—É UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ
4. Bypass-–∏—Ç–∏ Proposal lifecycle –¥–ª—è –º—É—Ç–∞—Ü—ñ–π
5. –†–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ auto-approve —É frontend (—Ü–µ —Å–µ—Ä–≤–µ—Ä–Ω–∞ –ª–æ–≥—ñ–∫–∞)
6. –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π —Å—Ç–∞–Ω Mastra/Orchestration Layer

### –û–ë–û–í'–Ø–ó–ö–û–í–û:
1. –í—Å—ñ API –∑–∞–ø–∏—Ç–∏ —á–µ—Ä–µ–∑ backend (–ø–æ—Ä—Ç 5000)
2. Polling –¥–ª—è real-time –¥–∞–Ω–∏—Ö (workers: 10—Å, tasks: 5—Å)
3. Loading/skeleton states –¥–ª—è –≤—Å—ñ—Ö async –æ–ø–µ—Ä–∞—Ü—ñ–π
4. Error handling –∑ user-friendly –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏
5. Audit log –∑–∞–ø–∏—Å –¥–ª—è –∞–¥–º—ñ–Ω-–æ–ø–µ—Ä–∞—Ü—ñ–π (backend —Ä–æ–±–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
6. `data-testid` –Ω–∞ –≤—Å—ñ—Ö —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç–∞—Ö

---

## 9. –°–µ–º–∞–Ω—Ç–∏—á–Ω—ñ –∑–≤'—è–∑–∫–∏

**–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥:**
- [[BLOOM_IDENTITY_AND_RUNTIME]] ‚Äî canonical execution identity
- [[–ö–ê–ù–û–ù–Ü–ß–ù–ê_–ê–†–•–Ü–¢–ï–ö–¢–£–†–ê_–í–ò–ö–û–ù–ê–ù–ù–Ø]] ‚Äî runtime architecture
- [[–ö–û–ù–¢–†–ê–ö–¢_–ê–ì–ï–ù–¢–ê_V1]] ‚Äî agent contract
- [[–ö–û–ù–¢–†–ê–ö–¢–ò_API_V1]] ‚Äî API schemas
- [[LOVABLE_–£–ó–ì–û–î–ñ–ï–ù–ù–Ø_–ó_–ê–†–•–Ü–¢–ï–ö–¢–£–†–û–Æ_–í–ò–ö–û–ù–ê–ù–ù–Ø]] ‚Äî frontend contract
- [[BLOOM_AUTH_UI_SPEC]] ‚Äî auth UI spec
- [[memory/ARCHITECTURE]] ‚Äî DiffMem memory architecture
- [[memory/API_CONTRACT]] ‚Äî Memory API spec

**–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:**
- `server/routes.ts` ‚Äî Runtime API + Membridge proxy + Node Management API
- `server/runtime/membridgeClient.ts` ‚Äî Membridge HTTP client
- `server/runtime/minioArtifacts.ts` ‚Äî MinIO artifact storage
- `server/runtime/workerSync.ts` ‚Äî Worker auto-sync
- `shared/schema.ts` ‚Äî TypeScript types + Zod schemas
- `client/src/pages/RuntimeSettings.tsx` ‚Äî Runtime UI
- `client/src/pages/MembridgePage.tsx` ‚Äî Membridge Control Plane UI + Multi-project git management
- `client/src/pages/NodeManagement.tsx` ‚Äî Node & Agent fleet management UI
- `client/src/App.tsx` ‚Äî –ù–∞–≤—ñ–≥–∞—Ü—ñ—è: Runtime / Membridge / Nodes
